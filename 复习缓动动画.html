<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			#box {
				width: 100px;
				height: 100px;
				background-color: red;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<button id="btn">按钮</button>
		<div id="box"></div>
		<script type="text/javascript">
			var timer = null;
			var btn = document.getElementById("btn");
			var box = document.getElementById("box");
			btn.onclick = function(){
				animate(box,400);
				/*clearInterval(timer)
				timer = setInterval(function(){
					//leader = leader + step;  匀速动画
					//step = (target - leader)/10;
					var leader = box.offsetLeft;
					//var step = 10;
					var target = 400;
					step = (target - leader) / 10;
					step = step> 0?Math.ceil(step):Math.floor(step);
					leader = leader + step;
					box.style.left = leader + "px";
					console.log("target"+target+ "leader" + leader);
					if(target === leader){
						clearInterval(timer)
					}
				},15);*/
			};
			
	//封装缓动动画
		function animate(obj,target){
			clearInterval(obj.timer);
			obj.timer = setInterval(function(){
				var leader = obj.offsetLeft;
				step = (target - leader) /10;
				step = step > 0?Math.ceil(step):Math.floor(step);
				leader = leader + step;
				obj.style.left = leader + "px";
				if(target === leader){
					clearInterval(obj.timer)
				}
			},15);
		}
		</script>
	</body>
</html>
